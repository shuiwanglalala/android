# 其他2

[位操作基础篇之位操作全面总结](https://blog.csdn.net/MoreWindows/article/details/7354571)

+ 位操作基础

  | 符号 | 描述 | 运算规则                        by MoreWindows               |
  | ---- | ---- | ------------------------------------------------------------ |
  | &    | 与   | 两个位都为1时，结果才为1                                     |
  | \|   | 或   | 两个位都为0时，结果才为0                                     |
  | ^    | 异或 | 两个位相同为0，相异为1                                       |
  | ~    | 取反 | 0变1，1变0                                                   |
  | <<   | 左移 | 各二进位全部左移若干位，高位丢弃，低位补0                    |
  | >>   | 右移 | 各二进位全部右移若干位，对无符号数，高位补0，有符号数，各编译器处理方法不一样，有的补符号位（算术右移），有的补0（逻辑右移） |

  +  在这6种操作符，只有~取反是单目操作符，其它5种都是双目操作符
  + 位操作只能用于整形数据，对float和double类型进行位操作会被编译器报错
  + 对于移位操作，在微软的VC6.0和VS2008编译器都是采取算术称位即算术移位操作，算术移位是相对于逻辑移位，它们在左移操作中都一样，低位补0即可，但在右移中逻辑移位的高位补0而算术移位的高位是补符号位

+ 常用位操作小技巧

  + 判断奇偶

    只要根据最未位是0还是1来决定，为0就是偶数，为1就是奇数。因此可以用if ((a & 1) == 0)代替if (a % 2 == 0)来判断a是不是偶数

  + 位操作实现乘除法

    数 a 向右移一位，相当于将 a 除以 2；数 a 向左移一位，相当于将 a 乘以 2

  + 交换两数

    ```c
    void Swap(int &a, int &b)
    {
    	if (a != b)
    	{
    		a ^= b;
    		b ^= a;
    		a ^= b;
    	}
    }
    ```

    

  + 变换符号

    变换符号只需要取反后加1即可

    ```c
    int SignReversal(int a)
    {
    	return ~a + 1;
    }
    ```

    

  + 求绝对值

    ```c
    int my_abs(int a)
    {
    	int i = a >> 31;
    	return i == 0 ? a : (~a + 1);
    }
    ```

    ```c
    int my_abs(int a)
    {
    	int i = a >> 31;
    	return ((a ^ i) - i);
    }
    ```

    对于任何数，与0异或都会保持不变，与-1即0xFFFFFFFF异或就相当于取反

+ 位操作与空间压缩

+ 位操作的趣味应用

  + 高低位交换

    只要将x>>8与x<<8这两个数相或就可以得到

  + 二进制逆序

  + x & (x - 1) 用于消去x最后一位的1

    + 应用一 用 O(1) 时间检测整数 n 是否是 2 的幂次

      N如果是2的幂次，则N满足两个条件

      + N >0
      + N的二进制表示中只有一个1

      N & (N - 1)将N唯一的一个1消去，应该返回0

    + 二进制中1的个数

    ```java
    count = 0  
    while(a){  
      a = a & (a - 1);  
      count++;  
    }
    ```

    

  + 缺失的数字

    利用异或运算的两个特性——1.自己与自己异或结果为0，2.异或满足交换律。因此我们将这些数字全异或一遍，结果就一定是那个仅出现一个的那个数

    + 数组中，只有两个数出现一次，剩下都出现两次，找出出现一次的

      不妨假设出现一个的两个元素是x，y，那么最终所有的元素异或的结果就是res = x^y。并且res！=0，那么我们可以找出res二进制表示中的某一位是1。对于原来的数组，我们可以根据这个位置是不是1就可以将数组分成两个部分。x，y在不同的两个子数组中