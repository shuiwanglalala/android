# 数据链路层

+ 数据链路层使用的信道类型
  + 点到点信道
    + PPP协议
  + 广播信道
    + CSMA/CD

+ 封装成帧
  + 在一段数据的前后分别填上首部和尾部，确定帧的界限

+ 透明传输
  + 发送端的数据链路层在数据中出行控制字符SOH/EOT的前面插入一个转义字符ESC

+ 差错控制
  + 在数据后台添加的冗余码称为帧检验序列FCS，FCS可以由多种算法得出，CRC是其中一种
  + 循环冗余检验 CRC
    + 除数越长，越可靠
    + 只能做到无差错接受/无比特差错，不能做到无传输差错（要做到可靠传输，必须加上确认和重传机制）

+ PPP

  + 帧格式

    | F    | A 地址 | C 保留字段 | 协议 | IP数据报       | FCS  | F    |
    | ---- | ------ | ---------- | ---- | -------------- | ---- | ---- |
    | 7E   | FF     | 03         |      |                |      | 7E   |
    | 1    | 1      | 1          | 2    | 不超过1500byte | 2    | 1    |

  + 传输方式

    + 同步传输
    + 异步传输
      + 零比特填充 只要发现5个联系的1，就加上一个0

+ CSMA/CD 载波监听多点接入/碰撞检测

  + 计算机边发送数据边检测信道上的信号电压大小。当电压摆动值超过一定的阀门值，就认为至少两个站同时发送数据，表明产生了碰撞
  + 以太网端到端往返时延2τ称为争用期/碰撞窗口，通常取51.2us。10Mb/s的以太网，碰撞窗口内可以发送512bit，即64字节（最短有效帧长）。以太网发送数据，若前64字节未发生冲突，则后续数据就不会发生冲突
  + 发生碰撞的站在停止发生数据后，需要退避一个随机时间才能再次发生数据，一般为2τ（基本退避时间）的整数倍

+ 以太网
  + 符合DIX Ethernet V2标准的局域网
  + 集线器
    + 使用电子器件来模拟实际电缆线的工作，这个系统任然像一个以太网那样运行。使用集线器的以太网在逻辑上仍是一个总线网，各工作站使用的还是CSMA/CD协议，共享逻辑上的总线

+ MAC

  + 发往本站的帧，类型有

    + 单播帧 一对一
    + 广播帧 一对全部 ff-ff-ff-ff-ff-ff
    + 多播帧 一对多

  + MAC帧格式

    | 前同步码 | 帧开始定界符 | 目标地址 | 源地址 | 类型 | IP数据报 | FCS  |
    | -------- | ------------ | -------- | ------ | ---- | -------- | ---- |
    |          | 01010101     |          |        |      |          |      |
    | 7        | 1            | 6        | 6      | 2    | 46-1500  | 4    |