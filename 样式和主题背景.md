# 样式和主题背景

## 主题背景与样式

主题背景和样式有许多相似之处，但其用途不同。主题背景和样式具有相同的基本结构，即用于将属性映射到资源的键值对。

样式用于为特定类型的视图指定属性。例如，一个样式可以指定一个按钮的属性。您在样式中指定的每个属性都是您可以在布局文件中设置的属性。通过将所有属性提取到一个样式中，可以跨多个微件轻松使用和维护这些属性。

主题背景定义具名资源的集合，可由样式、布局、微件等引用。主题背景为 Android 资源分配语义名称，例如 `colorPrimary`。

## 创建并应用样式

只要视图接受，该样式中指定的每个属性都会应用于该视图。对于不接受的属性，视图会将其忽略。

**注意**：只有添加了 `style` 属性的元素才会收到这些样式属性，任何子视图都不会应用这些样式。如果希望子视图继承样式，应改为应用具有 `android:theme` 属性的样式。

## 扩展和自定义样式

**注意**：如果使用点分表示法来扩展样式，并且还包含 `parent` 属性，那么父样式将替换通过点分表示法继承的任何样式。

## 将样式作为主题背景来应用

从 Android 5.0（API 级别 21）和 Android 支持库 v22.1 开始，您还可以在布局文件中为视图指定 `android:theme` 属性。这会修改该视图及其任何子视图的主题背景，这对于更改界面中特定部分的主题背景调色板很有帮助。

## 样式层次结构

在选择如何为应用设置样式时，需考虑 Android 的样式层次结构。一般来说，您应当尽量使用主题背景和样式，以保持一致性。如果您在多个位置指定了相同的属性，下面的列表将决定最终应用哪些属性。该列表按照优先级从高到低的顺序排序：

1. 通过文本 span 将字符或段落级样式应用到 `TextView` 派生的类
2. 以编程方式应用属性
3. 将单独的属性直接应用到 View
4. 将样式应用到 View
5. 默认样式
6. 将主题背景应用到 View 集合、Activity 或整个应用
7. 应用某些特定于 View 的样式，例如为 `TextView` 设置 `[TextAppearance]`

如果您尝试设置应用样式但没有看到预期结果，有可能是因为其他样式覆盖了您的更改。例如，如果您将某个主题背景应用到您的应用，同时又将某个样式应用到单个 `View`，那么样式属性将会覆盖与该 `View` 匹配的任何主题背景属性。不过请注意，未被样式覆盖的所有主题背景属性仍会被使用。

### TextAppearance

样式的一个局限性在于，您只能对 View 应用一种样式。但在 TextView 中，您也可以指定功能与样式相似的 TextAppearance 属性

`TextAppearance` 可用于定义特定于文本的样式，同时让 `View` 的样式可用于其他用途。但请注意，如果您直接在 `View` 或样式中定义任何文本属性，这些值会覆盖 `TextAppearance` 值。
