# 绑定适配器

数据绑定库允许您通过使用适配器指定为设置值而调用的方法、提供您自己的绑定逻辑，以及指定返回对象的类型

## 设置特性值

### 自动选择方法

对于名为 `example` 的特性，库自动尝试查找接受兼容类型作为参数的方法 `setExample(arg)`。系统不会考虑特性的命名空间，搜索方法时仅使用特性名称和类型

即使不存在具有给定名称的特性，数据绑定也会起作用。然后，您可以使用数据绑定为任何 setter 创建特性

### 指定自定义方法名称

一些属性具有名称不符的 setter 方法。在这些情况下，某个特性可能会使用 [`BindingMethods`](https://developer.android.com/reference/androidx/databinding/BindingMethods) 注释与 setter 相关联。注释与类一起使用，可以包含多个 [`BindingMethod`](https://developer.android.com/reference/androidx/databinding/BindingMethod) 注释，每个注释对应一个重命名的方法。绑定方法是可添加到应用中任何类的注释

### 提供自定义逻辑

参数类型非常重要。第一个参数用于确定与特性关联的视图类型，第二个参数用于确定在给定特性的绑定表达式中接受的类型

出现冲突时，您定义的绑定适配器会替换由 Android 框架提供的默认适配器

您还可以使用接收多个属性的适配器

**注意**：数据绑定库在匹配时会忽略自定义命名空间

```java
 @BindingAdapter(value={"imageUrl", "placeholder"}, requireAll=false)
    public static void setImageUrl(ImageView imageView, String url, Drawable placeHolder) {
      if (url == null) {
        imageView.setImageDrawable(placeholder);
      } else {
        MyImageLoader.loadInto(imageView, url, placeholder);
      }
    }
```

绑定适配器方法可以选择性在处理程序中使用旧值。同时获取旧值和新值的方法应该先为属性声明所有旧值，然后再声明新值

```java
    @BindingAdapter("android:paddingLeft")
    public static void setPaddingLeft(View view, int oldPadding, int newPadding) {
      if (oldPadding != newPadding) {
          view.setPadding(newPadding,
                          view.getPaddingTop(),
                          view.getPaddingRight(),
                          view.getPaddingBottom());
       }
    }
```

事件处理脚本只能与具有一种抽象方法的接口或抽象类一起使用

当监听器有多个方法时，必须将它拆分为多个监听器

## 对象转换

### 自动转换对象

当绑定表达式返回 `Object` 时，库会选择用于设置属性值的方法。`Object` 会转换为所选方法的参数类型。对于使用 [`ObservableMap`](https://developer.android.com/reference/androidx/databinding/ObservableMap) 类存储数据的应用，这种行为非常便捷

### 自定义转换

您可以使用带有 [`BindingConversion`](https://developer.android.com/reference/androidx/databinding/BindingConversion) 注释的静态方法完成这个转换