# 请求某个分享的文件

## 发送文件请求

为了从服务器应用请求文件，客户端应用需要使用 `Intent` 调用 `startActivityForResult`，该 Intent 包含 `ACTION_PICK` 等操作和客户端应用能够处理的 MIME 类型

## 访问请求的文件

服务器应用通过 `Intent` 将文件的内容 URI 发回给客户端应用。此 `Intent` 会通过替换 `onActivityResult()` 传递给客户端应用。客户端应用获得文件的内容 URI 后，即可通过获取其 `FileDescriptor` 来访问该文件

由于客户端应用只会收到文件的内容 URI，因此，在此过程中可确保文件的安全。由于此 URI 中不包含目录路径，因此客户端应用无法发现和打开服务器应用中的任何其他文件。只有客户端应用可以访问该文件，而且必须具有服务器应用授予的权限才能访问。这些权限是临时的，一旦客户端应用的任务堆栈结束，便无法再从服务器应用外访问该文件

方法 `openFileDescriptor()` 会返回文件的 `ParcelFileDescriptor`。客户端应用从此对象获取 `FileDescriptor` 对象，然后使用后者来读取文件